import { Head, Appear } from "mdx-deck"
import { Invert } from "mdx-deck/layouts"

import syntaxTheme from "prism-react-renderer/themes/oceanicNext"
export { default as theme } from "./theme"
import { CodeSurfer } from "mdx-deck-code-surfer"

import Inspiration from "./components/Inspiration"
import TitleSlide from "./components/TitleSlide"

import Translator from "./components/enterUpdateDeleteMsg.js"
import StripeMenu from "./components/StripeMenu"
import FLIPBasicExample from "./components/FLIPBasicExample"
import ReactFlipToolkitBasicExample from "./components/ReactFlipToolkitBasicExample"
import AnimatedListNoAnimation from "./components/AnimatedList/NoAnimation.js"
import AnimatedList from "./components/AnimatedList/FinalAnimation.js"
import FirstAidKitExample from "./components/FirstAidKitExample"

import "./injectGlobalCSS"

<Head>
  <title>Layout Animations</title>
</Head>

## <TitleSlide />

---

<Translator
  firstMsg="This talk is going to change the way you do front end development, and, quite possibly, your life"
  secondMsg="If you're interested in UI animation, you will, I hope, find this talk to be at least mildly informative (but I won't be offended if not)"
/>

---

# Exit-Update-Enter in Web Layouts

---

## With a Simple Fade Transition

export default Invert

<FirstAidKitExample type="fade" />

<Inspiration>
  <a href="https://dribbble.com/shots/3768507--First-Aid-Kit">
    Inspired by this Dribbble shot
  </a>
</Inspiration>

---

## With Enter Transitions

export default Invert

<FirstAidKitExample type="enter" />

<Inspiration>
  <a href="https://dribbble.com/shots/3768507--First-Aid-Kit">
    Inspired by this Dribbble shot
  </a>
</Inspiration>

---

## With Exit & Enter Transitions

export default Invert

<FirstAidKitExample type="exit" />

<Inspiration>
  Inspired by
  <a href="https://dribbble.com/shots/3768507--First-Aid-Kit">
    this Dribbble shot
  </a>
</Inspiration>

---

## With Update & Exit & Enter Transitions

export default Invert

<FirstAidKitExample />

<Inspiration>
  Inspired by
  <a href="https://dribbble.com/shots/3768507--First-Aid-Kit">
    this Dribbble shot
  </a>
</Inspiration>

---

# Animated layouts with JS frameworks can be hard

<div className="big-list" />

1. **Coordinated transitions** go against component encapsulation
2. **Declarative nature of virtual DOM** can make exit and update animations more complicated
3. **CSS** z-index, compounded transforms, style cascade...

---

## We Can Implement the "Update" Stage with the

# FLIP Technique

---

<FLIPBasicExample noAnimation />

---

<CodeSurfer
  theme={syntaxTheme}
  code={require("!raw-loader!./components/FLIPBasicExample")}
  steps={[
    {
      range: [31, 42],
      notes: () => (
        <span>
          {" "}
          We're going to use FLIP to transition between these two components
        </span>
      )
    },
    {
      range: [44, 91],
      notes: () => (
        <span>
          Here's what the complete animated component looks like at a high level
        </span>
      )
    },
    {
      range: [75, 89],
      notes: () => (
        <span>
          Here's the render method of the component, we just need to add
          transitions
        </span>
      )
    },
    {
      range: [47, 53],
      notes: () => (
        <span>
          {" "}
          <b>First:</b> Cache the dimensions of the element right before changes
          are applied
        </span>
      )
    },
    {
      range: [54, 74],
      notes: () => (
        <span>
          {" "}
          Immediately after changes are applied and before they are rendered,
          manually undo them
        </span>
      )
    },
    {
      range: [57, 58],
      notes: () => (
        <span>
          {" "}
          <b>Last:</b> Get the new dimensions of the element
        </span>
      )
    },
    {
      range: [59, 63],
      notes: () => (
        <span>
          {" "}
          <b>Invert:</b> Figure out how much we're going to have to move and scale
          the element to undo the changes
        </span>
      )
    },
    {
      range: [64, 72],
      notes: () => (
        <span>
          {" "}
          <b>Play:</b> Immediately apply the inverted styles, then transform the
          element to its new position and size{" "}
        </span>
      )
    }
  ]}
/>

---

<FLIPBasicExample />

---

<a href="https://github.com/aholachek/react-flip-toolkit">
  <img
    style={{ width: "700px", margin: "6rem auto 0 auto" }}
    src={require("file-loader!./assets/rft-logo.gif")}
  />
</a>

---

<CodeSurfer
  notes="React-Flip-Toolkit Example"
  theme={syntaxTheme}
  code={require("!raw-loader!./components/ReactFlipToolkitBasicExample")}
  steps={[
    { range: [44, 67], notes: ()=> <span>with <code>React-Flip-Toolkit</code></span>},
    { lines: [45, 65], notes: ()=> <span><code>Flipper</code></span>},
    { lines: [46, 64], notes: ()=> <span><code>Flipped</code></span>},
    { lines: [49, 53,  57, 61], notes: ()=> <span> <code>Flipped</code> with <code>inverseFlipId</code></span>}
  ]}
/>
---
<ReactFlipToolkitBasicExample />
---
# Can also be used with Vanilla JS or another JS framework
---
<CodeSurfer
  notes="React-Flip-Toolkit Example"
  theme={syntaxTheme}
  code={require("!raw-loader!./components/ReactFlipToolkitVanillaExample")}
  steps={[
    { range: [1, 26], notes: ()=> <span><code>React-Flip-Toolkit</code> is also usable without React</span>},
    { lines: [1,2], notes: ()=> <span>Import from <code>core</code> to get a Vanilla JS <code>Flipper</code> class component </span>},
    { lines: [7,8], notes: ()=> <span>Create an instance of the <code>Flipper</code> class to add animations</span>},
    { range: [9,13], notes: ()=> <span>And use it to instantiate new <code>Flipped</code> children</span>},
]}
/>

---

# Advantages of react-flip-toolkit:

<div className="big-list" />

1. **Batteries included, but highly configurable** Springs and staggers have good defaults but can be changed
2. **Multipurpose** handles enter and exit animations anywhere in the DOM tree, as well as FLIP updates
3. **Practical** Minimizes complex DOM handling by providing features like scale cancellation
4. **Facilitates separation of components** by allowing you to FLIP two distinct components

---

# Separation of components

---

<StripeMenu noAnimation />

<Inspiration>
  Inspired by
  <a href="https://stripe.com/">Stripe's homepage</a>
</Inspiration>

---

<StripeMenu />

<Inspiration>
  Inspired by
  <a href="https://stripe.com/">Stripe's homepage</a>
</Inspiration>

---

# Staggering transitions

---

<AnimatedListNoAnimation />

<Inspiration dark>
  Inspired by
  <a href="https://uxplanet.org/animation-in-ui-design-from-concept-to-reality-85c49907b19d">
    an animation from this article
  </a>
</Inspiration>

---

<AnimatedList />

<Inspiration dark>
  Inspired by
  <a href="https://uxplanet.org/animation-in-ui-design-from-concept-to-reality-85c49907b19d">
    an animation from this article
  </a>
</Inspiration>

---

# Helpful articles on UI Motion Design

<a href="https://medium.com/ux-in-motion/creating-usability-with-motion-the-ux-in-motion-manifesto-a87a4584ddc">
  <img
    style={{ width: "1000px", margin: "2rem auto 0 auto" }}
    src={require("file-loader!./assets/12.gif")}
  />
</a>

<div className="small-list" />

1. [Creating Usability With Motion](https://medium.com/ux-in-motion/creating-usability-with-motion-the-ux-in-motion-manifesto-a87a4584ddc)
2. [Material Design: Understanding Motion](https://material.io/design/motion/)
3. [Material Design: Choreography](https://material.io/design/motion/choreography.html)

---

# Recommended resources / people to follow

<div className="big-list" />

1. [Popmotion Pose](https://popmotion.io/pose/) **([Matt Perry](https://twitter.com/popmotionjs))**
2. [Native Like Animations For Page Transitions On The Web](https://css-tricks.com/native-like-animations-for-page-transitions-on-the-web/) **([Sarah Drasner](https://twitter.com/sarah_edo))**
3. [The Case for Whimsy](https://github.com/joshwcomeau/react-europe-talk-2018#the-case-for-whimsy) **([Josh Comeau](https://twitter.com/joshwcomeau))**
4. [Animating Layouts with the FLIP Technique](https://css-tricks.com/animating-layouts-with-the-flip-technique/) **([David Khourshid](https://twitter.com/davidkpiano))**
